Sourse of problem: embargoFunc function
problem: state->coins = state->coins + 1;
Solution: state->coins = state->coins + 2;
